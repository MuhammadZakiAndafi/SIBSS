{"version":3,"sources":["server.js"],"names":["express","require","session","flash","path","app","port","sequelize","userRoutes","pengajuanRoutes","approvalRoutes","skRoutes","set","join","__dirname","use","json","urlencoded","extended","secret","resave","saveUninitialized","cookie","secure","req","res","next","locals","success_msg","error_msg","sync","force","then","console","log","err","error","listen"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,OAAO,GAAGD,OAAO,CAAC,iBAAD,CAAvB;;AACA,IAAME,KAAK,GAAGF,OAAO,CAAC,eAAD,CAArB;;AACA,IAAMG,IAAI,GAAGH,OAAO,CAAC,MAAD,CAApB;;AACA,IAAMI,GAAG,GAAGL,OAAO,EAAnB;AACA,IAAMM,IAAI,GAAG,IAAb;;eACsBL,OAAO,CAAC,UAAD,C;IAArBM,S,YAAAA,S;;AACR,IAAMC,UAAU,GAAGP,OAAO,CAAC,qBAAD,CAA1B;;AACA,IAAMQ,eAAe,GAAGR,OAAO,CAAC,0BAAD,CAA/B;;AACA,IAAMS,cAAc,GAAGT,OAAO,CAAC,yBAAD,CAA9B;;AACA,IAAMU,QAAQ,GAAGV,OAAO,CAAC,mBAAD,CAAxB;;AACAI,GAAG,CAACO,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAP,GAAG,CAACO,GAAJ,CAAQ,OAAR,EAAiBR,IAAI,CAACS,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAjB;AACAT,GAAG,CAACU,GAAJ,CAAQf,OAAO,UAAP,CAAeI,IAAI,CAACS,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAR;AAEAT,GAAG,CAACU,GAAJ,CAAQf,OAAO,CAACgB,IAAR,EAAR;AACAX,GAAG,CAACU,GAAJ,CAAQf,OAAO,CAACiB,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAb,GAAG,CAACU,GAAJ,CAAQ,UAAR,EAAoBf,OAAO,UAAP,CAAe,SAAf,CAApB;AAEAK,GAAG,CAACU,GAAJ,CAAQb,OAAO,CAAC;AACdiB,EAAAA,MAAM,EAAE,YADM;AAEdC,EAAAA,MAAM,EAAE,KAFM;AAGdC,EAAAA,iBAAiB,EAAE,IAHL;AAIdC,EAAAA,MAAM,EAAE;AAAEC,IAAAA,MAAM,EAAE;AAAV,GAJM,CAIY;;AAJZ,CAAD,CAAf,E,CAOA;;AACAlB,GAAG,CAACU,GAAJ,CAAQZ,KAAK,EAAb,E,CAEA;;AACAE,GAAG,CAACU,GAAJ,CAAQ,UAACS,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1BD,EAAAA,GAAG,CAACE,MAAJ,CAAWC,WAAX,GAAyBJ,GAAG,CAACrB,KAAJ,CAAU,aAAV,CAAzB;AACAsB,EAAAA,GAAG,CAACE,MAAJ,CAAWE,SAAX,GAAuBL,GAAG,CAACrB,KAAJ,CAAU,WAAV,CAAvB;AACAuB,EAAAA,IAAI;AACL,CAJD,E,CAOA;;AACArB,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAaP,UAAb;AACAH,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAaN,eAAb;AACAJ,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAaL,cAAb;AACAL,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAaJ,QAAb;AAEAJ,SAAS,CAACuB,IAAV,CAAe;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAAf,EAAkC;AAAlC,CACGC,IADH,CACQ,YAAM;AACVC,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACD,CAHH,WAIS,UAAAC,GAAG,EAAI;AACZF,EAAAA,OAAO,CAACG,KAAR,CAAc,0BAAd,EAA0CD,GAA1C;AACD,CANH;AAQA9B,GAAG,CAACgC,MAAJ,CAAW/B,IAAX,EAAiB,YAAM;AACrB2B,EAAAA,OAAO,CAACC,GAAR,iDAAqD5B,IAArD;AACD,CAFD","sourcesContent":["const express = require('express');\r\nconst session = require('express-session');\r\nconst flash = require('connect-flash');\r\nconst path = require('path');\r\nconst app = express();\r\nconst port = 3000;\r\nconst { sequelize } = require('./models');\r\nconst userRoutes = require('./routes/userRoutes');\r\nconst pengajuanRoutes = require('./routes/pengajuanRoutes');\r\nconst approvalRoutes = require('./routes/approvalRoutes');\r\nconst skRoutes = require('./routes/skRoutes');\r\napp.set('view engine', 'ejs');\r\napp.set('views', path.join(__dirname, 'views')); \r\napp.use(express.static(path.join(__dirname, 'public')));\r\n\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\napp.use('/uploads', express.static('uploads'));\r\n\r\napp.use(session({\r\n  secret: 'secret-key',\r\n  resave: false,\r\n  saveUninitialized: true,\r\n  cookie: { secure: false } // Pastikan secure diatur ke true di production\r\n}));\r\n\r\n// Middleware untuk flash messages\r\napp.use(flash());\r\n\r\n// Middleware untuk mengatur flash messages ke res.locals\r\napp.use((req, res, next) => {\r\n  res.locals.success_msg = req.flash('success_msg');\r\n  res.locals.error_msg = req.flash('error_msg');\r\n  next();\r\n});\r\n\r\n\r\n// routes\r\napp.use('/', userRoutes);\r\napp.use('/', pengajuanRoutes);\r\napp.use('/', approvalRoutes);\r\napp.use('/', skRoutes);\r\n\r\nsequelize.sync({ force: false })  // Set to true if you want to drop and recreate tables\r\n  .then(() => {\r\n    console.log('Database synced');\r\n  })\r\n  .catch(err => {\r\n    console.error('Failed to sync database:', err);\r\n  });\r\n\r\napp.listen(port, () => {\r\n  console.log(`Server is running at http://localhost:${port}`);\r\n});\r\n"],"file":"server.dev.js"}