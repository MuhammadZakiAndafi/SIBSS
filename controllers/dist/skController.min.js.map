{"version":3,"sources":["skController.js"],"names":["db","require","exports","showSk","req","res","userId","userlogin","userRole","pengajuan","sks","regeneratorRuntime","async","_context","prev","next","session","user","role","awrap","Pengajuan","findOne","where","sent","findAll","pengajuanId","id","render","title","t0","console","error","status","send","stop"],"mappings":"aAAA,IAAMA,GAAKC,QAAQ,aAAnBC,QAAQC,OAAW,SAAAC,EAAnBC,GAAmB,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAC,KAAA,EAEXX,EAASC,EAAAY,QAAAC,KAAOb,GAAPG,EAAAH,EAAAY,QAAAC,KAAAT,EAAAD,EAAAW,KAFEL,EAAAE,KAAA,EAAAJ,mBAAAQ,MAEFnB,GAAAoB,UAAAC,QAAA,CAAAC,MAAA,CAAAhB,OAAAA,MAFE,KAAA,EAAA,OAEFG,EAFEI,EAAAU,KAAAV,EAAAE,KAAA,EAAAJ,mBAAAQ,MAIGnB,GAACgB,eAAiBQ,QAAA,CAQlCF,MAAO,CAAEG,YAAahB,EAAUiB,IAP5BnB,QAAAA,CAAAA,CAAAA,MAAYH,GAAIY,eALP,KAAA,EAITV,EAJSO,EAAAU,KAgBflB,EAAIsB,OAAO,sBAAuB,CAdrBjB,IAAAA,EAAAkB,MAAA,kBAOXN,SAAAA,IATaT,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAgB,GAAAhB,EAAA,MAAA,GAQ8BiB,QANhCC,MAAA,kCAMgClB,EAAAgB,IAe7CxB,EAAI2B,OAAO,KAAKC,KAAK,yBAvBN,KAAA,GAAA,IAAA,MAAA,OAAApB,EAAAqB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA","file":"skController.min.js","sourcesContent":["const db = require('../models');\r\n\r\nexports.showSk = async (req, res) => {\r\n  try {\r\n    const userId = req.session.user.id; // Ambil userId dari pengguna yang sedang login\r\n    const userlogin = req.session.user;\r\n    const userRole = userlogin.role; // Mendapatkan role user\r\n    // Ambil pengajuan yang terhubung dengan userId\r\n    const pengajuan = await db.Pengajuan.findOne({\r\n      where: { userId: userId }\r\n    });\r\n    const sks = await db.SuratKeputusan.findAll({\r\n      where: { pengajuanId: pengajuan.id },\r\n      include: [{model: db.Pengajuan}]\r\n    });\r\n\r\n    res.render('user/suratkeputusan', {\r\n       sks,\r\n       title: 'Surat Keputusan',\r\n       userRole\r\n       });\r\n  } catch (error) {\r\n    console.error('Error fetching surat keputusan:', error);\r\n    res.status(500).send('Internal Server Error');\r\n  }\r\n};"]}