{"version":3,"sources":["skController.js"],"names":["db","require","exports","showSk","req","res","userId","session","user","id","userlogin","userRole","role","Pengajuan","findOne","where","pengajuan","SuratKeputusan","findAll","pengajuanId","include","model","sks","render","title","console","error","status","send"],"mappings":";;AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,WAAD,CAAlB;;AAEAC,OAAO,CAACC,MAAR,GAAiB,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEPC,UAAAA,MAFO,GAEEF,GAAG,CAACG,OAAJ,CAAYC,IAAZ,CAAiBC,EAFnB,EAEuB;;AAC9BC,UAAAA,SAHO,GAGKN,GAAG,CAACG,OAAJ,CAAYC,IAHjB;AAIPG,UAAAA,QAJO,GAIID,SAAS,CAACE,IAJd,EAIoB;AACjC;;AALa;AAAA,0CAMWZ,EAAE,CAACa,SAAH,CAAaC,OAAb,CAAqB;AAC3CC,YAAAA,KAAK,EAAE;AAAET,cAAAA,MAAM,EAAEA;AAAV;AADoC,WAArB,CANX;;AAAA;AAMPU,UAAAA,SANO;AAAA;AAAA,0CASKhB,EAAE,CAACiB,cAAH,CAAkBC,OAAlB,CAA0B;AAC1CH,YAAAA,KAAK,EAAE;AAAEI,cAAAA,WAAW,EAAEH,SAAS,CAACP;AAAzB,aADmC;AAE1CW,YAAAA,OAAO,EAAE,CAAC;AAACC,cAAAA,KAAK,EAAErB,EAAE,CAACa;AAAX,aAAD;AAFiC,WAA1B,CATL;;AAAA;AASPS,UAAAA,GATO;AAcbjB,UAAAA,GAAG,CAACkB,MAAJ,CAAW,qBAAX,EAAkC;AAC/BD,YAAAA,GAAG,EAAHA,GAD+B;AAE/BE,YAAAA,KAAK,EAAE,iBAFwB;AAG/Bb,YAAAA,QAAQ,EAARA;AAH+B,WAAlC;AAda;AAAA;;AAAA;AAAA;AAAA;AAoBbc,UAAAA,OAAO,CAACC,KAAR,CAAc,iCAAd;AACArB,UAAAA,GAAG,CAACsB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,uBAArB;;AArBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAjB","sourcesContent":["const db = require('../models');\r\n\r\nexports.showSk = async (req, res) => {\r\n  try {\r\n    const userId = req.session.user.id; // Ambil userId dari pengguna yang sedang login\r\n    const userlogin = req.session.user;\r\n    const userRole = userlogin.role; // Mendapatkan role user\r\n    // Ambil pengajuan yang terhubung dengan userId\r\n    const pengajuan = await db.Pengajuan.findOne({\r\n      where: { userId: userId }\r\n    });\r\n    const sks = await db.SuratKeputusan.findAll({\r\n      where: { pengajuanId: pengajuan.id },\r\n      include: [{model: db.Pengajuan}]\r\n    });\r\n\r\n    res.render('user/suratkeputusan', {\r\n       sks,\r\n       title: 'Surat Keputusan',\r\n       userRole\r\n       });\r\n  } catch (error) {\r\n    console.error('Error fetching surat keputusan:', error);\r\n    res.status(500).send('Internal Server Error');\r\n  }\r\n};"],"file":"skController.dev.js"}