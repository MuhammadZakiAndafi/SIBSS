"use strict";var PDFDocument=require("pdfkit"),fs=require("fs"),ejs=require("ejs"),_require=require("util"),promisify=_require.promisify,db=require("../models");exports.generate=function(r,n){var t,s,a,u,i,o,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=function(r,n){var t,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(c(__dirname+"/views/template.ejs",r));case 2:t=e.sent,(s=new PDFDocument).pipe(fs.createWriteStream(n)),s.text(t,{align:"justify"}),s.end();case 7:case"end":return e.stop()}})},s=r.session.user.id,a=r.session.user,u=a.role,e.next=7,regeneratorRuntime.awrap(db.Pengajuan.findOne({where:{userId:s}}));case 7:return i=e.sent,e.next=10,regeneratorRuntime.awrap(db.SuratKeputusan.findAll({where:{pengajuanId:i.id},include:[{model:db.Pengajuan}]}));case 10:o=e.sent,n.render("/template",{sks:o,title:"Surat Keputusan",userRole:u}),c=promisify(ejs.renderFile),module.exports=t,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error generating PDF:",e.t0),n.status(500).send("Internal Server Error");case 20:case"end":return e.stop()}},null,null,[[0,16]])};
//# sourceMappingURL=createSK.min.js.map
