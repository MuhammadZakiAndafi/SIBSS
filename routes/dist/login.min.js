"use strict";var express=require("express"),bcrypt=require("bcryptjs"),session=require("express-session"),mysql=require("mysql"),path=require("path"),router=express.Router(),db=mysql.createConnection({host:"localhost",user:"root",password:"",database:"login"});db.connect(function(r){r?console.error("Error connecting to MySQL:",r):console.log("Connected to MySQL database")}),router.get("/",function(r,e){e.render("login")}),router.post("/",function(s,o){var r=s.body,n=r.username,t=r.password;if(!n||!t)return o.status(400).send("Please provide username and password");db.query("SELECT * FROM users WHERE username = ?",[n],function(r,e){return r?(console.error("Error in database query:",r),o.status(500).send("An error occurred. Please try again later.")):0===e.length?o.status(401).send("Incorrect Username and/or Password!"):void bcrypt.compare(t,e[0].password,function(r,e){if(r)return console.error("Error comparing passwords:",r),o.status(500).send("An error occurred. Please try again later.");e?(s.session.loggedin=!0,s.session.username=n,console.log(s.session),o.redirect("/dashboard")):o.status(401).send("Incorrect Username and/or Password!")})})}),module.exports=router;
//# sourceMappingURL=login.min.js.map
